<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fansfunding.common.dao.CheckerDao" >
  <resultMap id="BaseResultMap" type="Checker" >
  	<result column="id" property="id" jdbcType="INTEGER" />
	<result column="checknum" property="checknum" jdbcType="INTEGER" />
    <result column="request_time" property="request_time"/>
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="token" property="token" jdbcType="VARCHAR" />
  </resultMap>
    
  <select id="selectByPhone" resultMap="BaseResultMap" parameterType="string">
    select id,checknum,request_time,phone,token
    from checker where phone = #{phone}
  </select>
  
  
  <select id="selectById" resultMap="BaseResultMap" parameterType="int">
    select id,checknum,request_time,phone,token
    from checker where id = #{id}
  </select>
  
  <insert id="insertNewChecker" useGeneratedKeys="true" keyProperty="id" parameterType="com.fansfunding.common.entity.Checker">
	insert into checker(id,checknum,request_time,phone,token)
		values(#{id},#{checknum},now(),#{phone},#{token})
  </insert>
  
  <delete id="deleteById" parameterType="int">
  	delete from checker where id=#{id}
  </delete>
  
  <delete id="deleteByPhone" parameterType="string">
  	delete from checker where phone=#{phone}
  </delete>
  
    <update id="updateToken" parameterType="com.fansfunding.common.entity.Checker">
  	update checker
  	set token = #{token}
  	where id = #{id}
  </update>
  
  
</mapper>